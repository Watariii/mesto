(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function n(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var o=function(){function t(e,r,o,i,u){var c=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"_createCard",(function(){return c._cardTitle.textContent=c._name,c._cardImage.src=c._link,c._cardImage.alt=c._name,c._setAmountLikes(),c._setEventListeners(),c._handleButtonLike(),c._cardElement})),n(this,"_setEventListeners",(function(){c._buttonLike.addEventListener("click",(function(){c._buttonLike.classList.contains("photo-elements__like-button_active")?c._removeLikeCard():c._likeCard()})),c._buttonDelete.addEventListener("click",(function(){c._handleConfirmDelete(c._cardElement,c._idCard)})),c._cardImage.addEventListener("click",(function(){c._handleClickCard(c._name,c._link)})),c._hideButtonDelete()})),n(this,"_handleButtonLike",(function(){c._api.getUserInfo().then((function(t){return t._id})).then((function(t){c._likes.forEach((function(e){e._id===t?c._buttonLike.classList.add("photo-elements__like-button_active"):c._buttonLike.classList.remove("photo-elements__like-button_active")}))})).catch((function(t){alert(t)}))})),n(this,"getCard",(function(){return c._createCard()})),this._name=e.name,this._link=e.link,this._likes=e.likes,this._idCard=e._id,this._idOwner=e.owner._id,this._template=document.querySelector(r).content,this._handleClickCard=o,this._api=i,this._handleConfirmDelete=u,this._cardElement=this._template.querySelector("li").cloneNode(!0),this._cardTitle=this._cardElement.querySelector(".photo-elements__title"),this._cardImage=this._cardElement.querySelector(".photo-elements__capture"),this._buttonLike=this._cardElement.querySelector(".photo-elements__like-button"),this._buttonDelete=this._cardElement.querySelector(".photo-elements__delete"),this._likesCounter=this._cardElement.querySelector(".photo-elements__like-counter")}var r,o;return r=t,(o=[{key:"_hideButtonDelete",value:function(){var t=this;this._api.getUserInfo().then((function(t){return t._id})).then((function(e){e!=t._idOwner&&(t._buttonDelete.remove(),t._buttonDelete=null)})).catch((function(t){alert(t)}))}},{key:"_setAmountLikes",value:function(){return this._likesCounter.textContent=this._likes.length}},{key:"_likeCard",value:function(){var t=this;this._api.likeCard(this._idCard).then((function(e){t._likesCounter.textContent=e.likes.length,t._buttonLike.classList.add("photo-elements__like-button_active")})).catch((function(t){alert(t)}))}},{key:"_removeLikeCard",value:function(){var t=this;this._api.removeLikeCard(this._idCard).then((function(e){t._likesCounter.textContent=e.likes.length,t._buttonLike.classList.remove("photo-elements__like-button_active")})).catch((function(t){alert(t)}))}}])&&e(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function c(t,e,n){return(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}var l=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"enableValidation",(function(){r._addListenerInput(),r.toggleButton()})),c(this,"toggleButton",(function(){var t=r._form.checkValidity();r._submitButton.disabled=!t,r._submitButton.classList.toggle(r._inactiveButtonClass,!t)})),this._inputSelector=e.inputSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._form=n,this._submitButton=this._form.querySelector(e.submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}var e,n;return e=t,(n=[{key:"_addListenerInput",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._handleFormInput(e),t.toggleButton()}))}))}},{key:"_handleFormInput",value:function(t){var e=this._form.querySelector("#".concat(t.id,"-error"));t.validity.valid?this._hideErrorMessage(t,e):this._showErrorMessage(t,e)}},{key:"_showErrorMessage",value:function(t,e){t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage}},{key:"_hideErrorMessage",value:function(t,e){t.classList.remove(this._inputErrorClass),e.textContent=""}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===s(e)?e:String(e)}var d=p((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"renderCards",(function(t){r._arrayCards=t,r._arrayCards.forEach((function(t){r._renderer(t)}))})),y(this,"addCard",(function(t){r._container.prepend(t)})),this._renderer=e,this._container=document.querySelector(n)}));function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function v(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===_(e)?e:String(e)}var S=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"close",(function(){n._deleteEventListeners(),n._popUp.classList.remove("pop-up_opened")})),v(this,"_setEventListeners",(function(){document.addEventListener("keydown",n._handleEscapeClose)})),v(this,"_deleteEventListeners",(function(){document.removeEventListener("keydown",n._handleEscapeClose)})),v(this,"_handleEscapeClose",(function(t){"Escape"===t.key&&n.close()})),v(this,"_handleOverlayClose",(function(t){t.target===t.currentTarget?n.close():t.stopPropagation()})),this._popUp=document.querySelector(e),this._closeIcon=this._popUp.querySelector(".pop-up__close-icon"),this._loading=this._popUp.querySelector(".pop-up__button")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popUp.classList.add("pop-up_opened"),this._setEventListeners()}},{key:"setEventListeners",value:function(){var t=this;this._closeIcon.addEventListener("click",(function(){t.close()})),this._popUp.addEventListener("mousedown",this._handleOverlayClose)}},{key:"renderLoading",value:function(t){this._loading.textContent,this._loading.textContent=t?"Сохранение...":"Сохранить"}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}function C(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===g(e)?e:String(e)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(n);if(r){var o=E(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}(this,t)});function i(t){var e,n,r,u,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=k(n=o.call(this,t)),c=function(t){var r=t.name,o=t.link;n._popUpCapture.src=o,n._popUpCapture.alt=r,n._popUpTitle.textContent=r,O((e=k(n),E(i.prototype)),"open",e).call(e)},(u=C(u="open"))in r?Object.defineProperty(r,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[u]=c,n._popUpCapture=n._popUp.querySelector(".pop-up__capture"),n._popUpTitle=n._popUp.querySelector(".pop-up__title_type_extend-cap"),n}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(S);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},U.apply(this,arguments)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function q(t,e,n){return(e=B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===P(e)?e:String(e)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(n);if(r){var o=R(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return T(t)}(this,t)});function i(t,e){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),q(T(r=o.call(this,t)),"close",(function(){r._popUpForm.reset(),r._popUp.classList.remove("pop-up_opened")})),q(T(r),"setEventListeners",(function(){r._popUp.addEventListener("submit",(function(t){r.renderLoading(!0),r._disableReload(t),r._handleFormSubmit(r._getInputValues()),r.close()})),U((n=T(r),R(i.prototype)),"setEventListeners",n).call(n)})),q(T(r),"_disableReload",(function(t){t.preventDefault()})),q(T(r),"_getInputValues",(function(){return r._newObject={},r._inputList.forEach((function(t){r._newObject[t.getAttribute("name")]=t.value})),r._newObject})),r._handleFormSubmit=e,r._popUpForm=r._popUp.querySelector(".pop-up__form"),r._inputList=Array.from(r._popUp.querySelectorAll("input")),r}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(S);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===x(o)?o:String(o)),r)}var o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},D.apply(this,arguments)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(r);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleDeleteCard=e,n._confirmButton=n._popUp.querySelector(".pop-up__button"),n}return e=u,(n=[{key:"open",value:function(t,e){D(N(u.prototype),"open",this).call(this),this._cardElement=t,this._idCard=e}},{key:"setEventListeners",value:function(){var t=this;this._confirmButton.addEventListener("click",(function(){t._handleDeleteCard(t._cardElement,t._idCard),t.close()})),D(N(u.prototype),"setEventListeners",this).call(this)}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(S),M=["name","about"];function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}var H=function(){function t(e){var n=e.profileFirstNameSelector,r=e.profileJobSelector,o=e.profileAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileFirstName=document.querySelector(n),this._profileJob=document.querySelector(r),this._profileAvatar=document.querySelector(o),this.newObject={}}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return this.newObject={name:this._profileFirstName.textContent,about:this._profileJob.textContent},this.newObject}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;(function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}})(t,M),this._profileFirstName.textContent=e,this._profileJob.textContent=n}},{key:"setUserAvatar",value:function(t){this._profileAvatar.src=t}}])&&G(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}var Q,W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._urlCards=e.url+"Cards",this._urlUsersMe=e.url+"users/me",this._urlAvatar=e.url+"users/me/avatar",this._headers=e.headers}var e,n;return e=t,(n=[{key:"getInitialCards",value:function(){return fetch(this._urlCards,{method:"GET",headers:this._headers}).then(this._checkStatus())}},{key:"addNewCard",value:function(t){return fetch(this._urlCards,{method:"POST",headers:this._headers,body:JSON.stringify(t)}).then(this._checkStatus())}},{key:"deleteCard",value:function(t){return fetch("".concat(this._urlCards,"/").concat(t),{method:"DELETE",headers:this._headers}).then(this._checkStatus())}},{key:"getUserInfo",value:function(){return fetch(this._urlUsersMe,{method:"GET",headers:this._headers}).then(this._checkStatus())}},{key:"updateAvatar",value:function(t){return fetch(this._urlAvatar,{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then(this._checkStatus())}},{key:"editUserInfo",value:function(t){return fetch(this._urlUsersMe,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then(this._checkStatus())}},{key:"getLikeCounter",value:function(){return fetch(this._urlCards,{method:"GET",headers:this._headers}).then(this._checkStatus())}},{key:"likeCard",value:function(t){return fetch("".concat(this._urlCards,"/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkStatus())}},{key:"removeLikeCard",value:function(t){return fetch("".concat(this._urlCards,"/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkStatus())}},{key:"_checkStatus",value:function(){return function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),X=document.querySelector(".profile__button-info"),Y=document.querySelector(".profile__button-cards"),Z=document.querySelector(".profile__avatar"),$=document.querySelector(".pop-up__input_type_firstname"),tt=document.querySelector(".pop-up__input_type_job"),et={};Q={formSelector:".pop-up__form",inputSelector:".pop-up__input",submitButtonSelector:".pop-up__button",inactiveButtonClass:"pop-up__button_disabled",inputErrorClass:"pop-up__input_type_error"},Array.from(document.querySelectorAll(Q.formSelector)).forEach((function(t){var e=new l(Q,t),n=t.getAttribute("name");et[n]=e,e.enableValidation()}));var nt=function(t,e){it.open({name:t,link:e})},rt=function(t){return new o(t,"#photo-elements__item",nt,ft,(function(t,e){st.open(t,e)})).getCard()},ot=new d((function(t){var e=rt(t);ot.addCard(e)}),".photo-elements__list"),it=new j(".pop-up_type_extend-cap");it.setEventListeners();var ut=new H({profileFirstNameSelector:".profile__firstname",profileJobSelector:".profile__job",profileAvatarSelector:".profile__avatar-selector"}),ct=new I(".pop-up_type_info",(function(t){ft.editUserInfo(t).then((function(t){ut.setUserInfo(t),ct.close()})).catch((function(t){alert(t)})).finally((function(){ct.renderLoading(!1)}))}));ct.setEventListeners();var at=new I(".pop-up_type_cards",(function(t){ft.addNewCard(t).then((function(t){ot.addCard(rt(t))})).catch((function(t){alert(t)})).finally((function(){at.renderLoading(!1)}))}));at.setEventListeners();var lt=new I(".pop-up_type_avatar",(function(t){ft.updateAvatar(t).then((function(t){ut.setUserAvatar(t.avatar)})).catch((function(t){alert(t)})).finally((function(){lt.renderLoading(!1)}))}));lt.setEventListeners();var st=new J(".pop-up_type_delete-card",(function(t,e){ft.deleteCard(e).then((function(){t.remove(),t=null})).catch((function(t){alert(t)}))}));st.setEventListeners(),X.addEventListener("click",(function(){var t;t=ut.getUserInfo(),$.value=t.name,tt.value=t.about,ct.open(),et["form-info"].toggleButton()})),Y.addEventListener("click",(function(){at.open(),et["form-cards"].toggleButton()})),Z.addEventListener("click",(function(){lt.open(),et["form-avatar"].toggleButton()}));var ft=new W({url:"https://mesto.nomoreparties.co/v1/cohort-62/",headers:{"content-type":"application/json",authorization:"4898a7e1-8307-419a-888b-936831ac477e"}});Promise.all([ft.getInitialCards(),ft.getUserInfo()]).then((function(t){ot.renderCards(t[0].reverse()),ut.setUserInfo(t[1]),ut.setUserAvatar(t[1].avatar)})).catch((function(t){alert(t)}))})();